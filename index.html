<!DOCTYPE html>
<html lang="en">
	<head>
	<meta charset="utf-8">
	<title>Space Engineers Star System 3D Vector math between planets/moons</title>
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans">
    <style type="text/css">
html {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
}

body {
    font-family: 'Open Sans', Arial, sans-serif;
    color: #2d3748;
    font-size: 16px;
    margin: 2em auto;
    max-width: 900px;
    padding: 2em;
    line-height: 1.6;
    text-align: left;
    background: white;
    border-radius: 12px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
}

h3 {
    color: #1a202c;
    font-size: 1.8em;
    margin-bottom: 1em;
    border-bottom: 3px solid #667eea;
    padding-bottom: 0.5em;
}

a {
    color: #667eea;
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}

a:visited {
    color: #764ba2;
}

.point-section {
    background: #f7fafc;
    border-left: 4px solid #667eea;
    padding: 1.2em;
    margin-bottom: 1.5em;
    border-radius: 6px;
}

.point-section strong {
    color: #667eea;
    font-size: 1.1em;
}

.input-row {
    margin: 0.8em 0;
}

input[type="text"],
input[type="number"],
input:not([type="button"]) {
    padding: 0.4em 0.6em;
    border: 2px solid #cbd5e0;
    border-radius: 4px;
    font-size: 0.95em;
    transition: border-color 0.2s;
}

input[type="text"]:focus,
input[type="number"]:focus,
input:not([type="button"]):focus {
    outline: none;
    border-color: #667eea;
}

select {
    padding: 0.4em 0.6em;
    border: 2px solid #cbd5e0;
    border-radius: 4px;
    font-size: 0.95em;
    background: white;
    cursor: pointer;
    transition: border-color 0.2s;
}

select:focus {
    outline: none;
    border-color: #667eea;
}

input[type="button"] {
    background: #667eea;
    color: white;
    border: none;
    padding: 0.6em 1.5em;
    border-radius: 6px;
    font-size: 1em;
    cursor: pointer;
    transition: all 0.2s;
    font-weight: 600;
}

input[type="button"]:hover {
    background: #5568d3;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}

input[type="button"]:active {
    transform: translateY(0);
}

.btn-small {
    padding: 0.4em 1em !important;
    font-size: 0.9em !important;
}

.btn-copy {
    background: #48bb78 !important;
    margin-left: 0.5em;
}

.btn-copy:hover {
    background: #38a169 !important;
}

.distance-input {
    margin: 1.5em 0;
}

.calculate-section {
    margin: 2em 0;
    text-align: center;
}

.noselect {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

small {
    font-size: .4em;
}

ul li img {
    height: 1em;
}

@media screen and (max-width:500px) {
    body {
        padding: 1em;
    }
}

div#work {
    display: none;
    font-family: 'Courier New', monospace;
    font-size: 1em;
    background: #f7fafc;
    border: 2px solid #667eea;
    border-radius: 8px;
    padding: 1.5em;
    line-height: 1.6;
    margin: 2em 0;
}

div#work p {
    margin: 0.5em 0;
}

div#work b {
    color: #667eea;
    font-size: 1.1em;
}

.helper-text {
    color: #718096;
    font-style: italic;
    font-size: 0.9em;
    margin-left: 0.5em;
}

.notes-section {
    background: #fffaf0;
    border-left: 4px solid #ed8936;
    padding: 1em;
    margin: 2em 0;
    border-radius: 6px;
}

.notes-section b {
    color: #c05621;
}

.copy-notification {
    display: none;
    color: #48bb78;
    font-weight: 600;
    margin-left: 0.5em;
}
	</style>
	<script
	  src="https://code.jquery.com/jquery-3.4.1.min.js"
	  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
	  crossorigin="anonymous"></script>
	<script>
		function clearWork() {
			$('#work').empty().show();
		}

		function showWork(str) {
			$('#work').append("<p>" + str + "</p>");
		}
		
		// https://stackoverflow.com/a/596503/296829
		function toInt(value) {
			return ~~value;
		}
		
		// https://stackoverflow.com/a/11832950/296829
		function roundToTwoDecimalPlaces(val) {
			return Math.round((val + Number.EPSILON) * 100) / 100
		}

		var lastGpsString = ''; // Store the last calculated GPS string

		function doTheMath() {
			var x0 = parseFloat($('#x0').val());
			var y0 = parseFloat($('#y0').val());
			var z0 = parseFloat($('#z0').val());
			var x1 = parseFloat($('#x1').val());
			var y1 = parseFloat($('#y1').val());
			var z1 = parseFloat($('#z1').val());
			var dt = parseFloat($('#dt').val());
			
			clearWork();
			//showWork("x0: " + x0 + ", y0: " + y0 + ", z0: " + z0);
			//showWork("x1: " + x1 + ", y1: " + y1 + ", z1: " + z1);
			
			// distance formula
			// d(p0, p1) = sqrt( (x1 - x0)^2 + (y1 - y0)^2 + (z1 - z0)^2 )
			var d = Math.sqrt(
				Math.pow(x1 - x0, 2) +
				Math.pow(y1 - y0, 2) +
				Math.pow(z1 - z0, 2)
			);
		
			// Let the ratio of distances, t = dt / d
			var t = dt / d; // add 0 error check
			//showWork("d: " + d + ", dt: " + dt + ", t: " + t);
			
			// https://math.stackexchange.com/a/1630886/102799
			// (xt, yt) = ( ( (1−t)x0 + tx1 ),( (1−t)y0 + ty1 ) )
			var xt = (1 - t) * x0 + t * x1;
			var yt = (1 - t) * y0 + t * y1;
			var zt = (1 - t) * z0 + t * z1;
			
			// xt = toInt(xt);
			// yt = toInt(yt);
			// zt = toInt(zt);
			xt = roundToTwoDecimalPlaces(xt);
			yt = roundToTwoDecimalPlaces(yt);
			zt = roundToTwoDecimalPlaces(zt);

			//showWork("xt: " + xt);
			//showWork("yt: " + yt);
			//showWork("zt: " + zt);
			lastGpsString = "GPS:VectorCoord:" + xt + ":" + yt + ":" + zt + ":";
			showWork("GPS coordinates for the point <b>" + dt + "m</b> along the line");
			showWork("from (" + x0 + ", " + y0 + ", " + z0 + ") to (" + x1 + ", " + y1 + ", " + z1 + ") are:");
			showWork("<br><b>(" + xt + ", " + yt + ", " + zt + ")</b>");
			showWork("<br><b>" + lastGpsString + "</b> <input type='button' class='btn-small btn-copy' id='copyBtn' value='Copy GPS'><span class='copy-notification' id='copyNotif'>✓ Copied!</span>");
			
			// Attach click handler to the copy button
			setTimeout(function() {
				$('#copyBtn').click(copyGpsToClipboard);
			}, 100);
		}

		function getCoordsForPlanet(planet) {
			// Thanks to the following Reddit link for the position of the original 3 planets and 3 moons:
			// https://www.reddit.com/r/spaceengineers/comments/9175ds/what_are_the_gps_coordinates_for_the_planets/
			//
			// You can also find this yourself by editing SANDBOX_0_0_0_.sbs in one of your save game folders.
			// Best to make a copy of the save game first, following these instructions,
			// from https://support.keenswh.com/spaceengineers/pc/topic/unable-to-rename-save-file
			// 1. Select world to rename in the load game screen
			// 2. Click "Backups"
			// 3. Select the most recent backup save file
			// 4. Click "Save As" on the left-hand sidebar
			// 5. Enter new name in the dialogue.
			//
			// Then change `false` to `true` for all `showGps` settings in your SANDBOX_0_0_0_.sbs file in one of your save games.
			// Then you must delete the SANDBOX_0_0_0_.sbsB5 file.
			// It will get recreated when you load the game ("warning... older game format...")
			// 
			// Then when you load the game the GPS coordinates will be visible and under K -> GPS tab.
			// Note: If you don't modify them they will disappear.
			//
			// TODO: I found radius information in there too, I should add that to this page
			switch (planet) {
				case 'Earth':
					//       <Radius>60000</Radius>
					return [0, 0, 0];
				case 'Moon':
					//       <Radius>9500</Radius>
					return [16384, 136384, -113616];
				case 'Mars':
					//       <Radius>60000</Radius>
					return [1031072, 131072, 1631072];
				case 'Europa':
					//       <Radius>9500</Radius>
					return [916384, 16384, 1616384];
				case 'Alien':
					//       <Radius>60000</Radius>
					return [131072, 131072, 5731072];
				case 'Titan':
					//       <Radius>9500</Radius>
					return [36384, 226384, 5796384];
				case 'Triton':
					//       <Radius>40126.5</Radius>
					return [-284463.5, -2434463.5, 365536.5];
				case 'Planet 26':
					// Radius: 60000
					// return [-1000000, -750000, 750000];
					return [-100000, -200000, 100000];
				case 'Sonos':
					// Radius: 60000
					return [-1500000, 1000000, -500000];
				case 'Drion':
					// Radius: 9500
					return [-1320000, 1000000, -500000];
				case 'Neirri':
					// Radius: 60000
					// Position: (-315536, 1187464, -1065536)
					return [-250000, 1253000, -1000000];
				case 'Kueli':
					// Radius: 9500
					// Position: (-266384, 1236616, -836384)
					return [-250000, 1253000, -820000];
				case 'Kharak':
					// Radius: 125000
					return [-1000000, -1000000, -1250000];
				case 'Agaris':
					// Radius: 60000
					return [50000, 100000, 250000];
			}
		}
		
		function updateCoords(point, planet) {
			var x, y, z;
			if (point === '0') {
				x = $('#x0');
				y = $('#y0');
				z = $('#z0');
			} else {
				x = $('#x1');
				y = $('#y1');
				z = $('#z1');
			}
			var coords = getCoordsForPlanet(planet);
			x.val(coords[0]);
			y.val(coords[1]);
			z.val(coords[2]);
		}

		function updateCoords0() {
			updateCoords('0', $('#choice0').val());
		}
		
		function updateCoords1() {
			updateCoords('1', $('#choice1').val());
		}

		function parseGPS(gpsString, point) {
			// Parse GPS format: GPS:name:x:y:z:#color:
			gpsString = gpsString.trim();
			if (!gpsString.startsWith('GPS:')) {
				alert('Invalid GPS format. Expected format: GPS:name:x:y:z:#color:');
				return;
			}
			
			var parts = gpsString.split(':');
			if (parts.length < 5) {
				alert('Invalid GPS format. Expected format: GPS:name:x:y:z:#color:');
				return;
			}
			
			var x = parseFloat(parts[2]);
			var y = parseFloat(parts[3]);
			var z = parseFloat(parts[4]);
			
			if (isNaN(x) || isNaN(y) || isNaN(z)) {
				alert('Invalid coordinates in GPS string.');
				return;
			}
			
			if (point === '0') {
				$('#x0').val(x);
				$('#y0').val(y);
				$('#z0').val(z);
				$('#gps0').val(''); // Clear after parsing
			} else {
				$('#x1').val(x);
				$('#y1').val(y);
				$('#z1').val(z);
				$('#gps1').val(''); // Clear after parsing
			}
		}

		function parseGPS0() {
			parseGPS($('#gps0').val(), '0');
		}
		
		function parseGPS1() {
			parseGPS($('#gps1').val(), '1');
		}

		function copyGpsToClipboard() {
			if (!lastGpsString) {
				alert('No GPS coordinates to copy. Please calculate first.');
				return;
			}
			
			// Use modern clipboard API
			if (navigator.clipboard && navigator.clipboard.writeText) {
				navigator.clipboard.writeText(lastGpsString).then(function() {
					$('#copyNotif').fadeIn(200).delay(2000).fadeOut(200);
				}, function() {
					// Fallback for older browsers
					fallbackCopy(lastGpsString);
				});
			} else {
				fallbackCopy(lastGpsString);
			}
		}

		function fallbackCopy(text) {
			var textArea = document.createElement('textarea');
			textArea.value = text;
			textArea.style.position = 'fixed';
			textArea.style.left = '-999999px';
			document.body.appendChild(textArea);
			textArea.focus();
			textArea.select();
			try {
				document.execCommand('copy');
				$('#copyNotif').fadeIn(200).delay(2000).fadeOut(200);
			} catch (err) {
				alert('Failed to copy to clipboard');
			}
			document.body.removeChild(textArea);
		}

		$(document).ready(function () {
			$('#clicker').click(doTheMath);
			$('#choice0').change(updateCoords0);
			$('#choice1').change(updateCoords1);
			$('#parseGps0').click(parseGPS0);
			$('#parseGps1').click(parseGPS1);
			updateCoords0();
			updateCoords1();
		});
	</script>
</head>
<body>
	<h3>Space Engineers Star System 3D Vector math between planets/moons</h3>
	<form>
	<div class="point-section">
	<strong>Point 0:</strong>
	<div class="input-row">
		x: <input id="x0" value="0" size="10"> 
		y: <input id="y0" value="0" size="10"> 
		z: <input id="z0" value="0" size="10">
	</div>
	<div class="input-row">
		<span class="helper-text">Quick fill from planet:</span>
		<select id="choice0">
		<option value="Earth">Earth</option>
		<option value="Moon">Moon</option>
		<option value="Mars">Mars</option>
		<option value="Europa">Europa</option>
		<option value="Alien">Alien</option>
		<option value="Titan">Titan</option>
		<option value="Triton">Triton</option>
		<option value="Planet 26">Planet 26</option>
		<option value="Sonos">Sonos</option>
		<option value="Drion">Drion</option>
		<option value="Neirri">Neirri</option>
		<option value="Kueli">Kueli</option> 
		<option value="Kharak">Kharak</option> 
		<option value="Agaris">Agaris</option> 
	</select>
	</div>
	<div class="input-row">
		<span class="helper-text">Or paste GPS from game:</span>
		<input id="gps0" size="50" placeholder="GPS:name:x:y:z:#color:">
		<input type="button" class="btn-small" id="parseGps0" value="Parse">
	</div>
	</div>
	
	<div class="point-section">
	<strong>Point 1:</strong>
	<div class="input-row">
		x: <input id="x1" value="0" size="10"> 
		y: <input id="y1" value="0" size="10"> 
		z: <input id="z1" value="0" size="10">
	</div>
	<div class="input-row">
		<span class="helper-text">Quick fill from planet:</span>
		<select id="choice1">
		<option value="Earth">Earth</option>
		<option value="Moon" selected>Moon</option>
		<option value="Mars">Mars</option>
		<option value="Europa">Europa</option>
		<option value="Alien">Alien</option>
		<option value="Titan">Titan</option>
		<option value="Triton">Triton</option>
		<option value="Planet 26">Planet 26</option>
		<option value="Sonos">Sonos</option>
		<option value="Drion">Drion</option>
		<option value="Neirri">Neirri</option>
		<option value="Kueli">Kueli</option>
		<option value="Agaris">Agaris</option> 
	</select>
	</div>
	<div class="input-row">
		<span class="helper-text">Or paste GPS from game:</span>
		<input id="gps1" size="50" placeholder="GPS:name:x:y:z:#color:">
		<input type="button" class="btn-small" id="parseGps1" value="Parse">
	</div>
	</div>
	
	<div class="distance-input">
		<strong>Distance along line starting from Point 0:</strong> 
		<input id="dt" size="10" value="105000"> meters
	</div>
	
	<div class="calculate-section">
		<input type="button" id="clicker" value="Calculate GPS Coordinates">
	</div>
	</form>

	<div id="work"></div>

	<div class="notes-section">
	<p><b>Notes</b>:
		<ul>
		<li>Radii: From center to surface, planets are about 60km and moons 9.5km (mountains and terrain will extend the radius).
		<ul>
			<li>However Triton has radius: 40km and Kharak has radius 125k.
		</ul>
		<li>Gravity wells: From their surface, planets are about 42km and moons 3.5km.
		<ul>
			<li>Not sure yet for Triton
		</ul>
		<li>Safe minimum distances from the centers for jump drive destinations are:
			<ul>
			<li>105000m (60km radius + 42km gravity well + 3km buffer) for planets
			<li>15000m (9.5km radius + 3.5km gravity well + 2km buffer) for moons.
			</ul>
		</ul>
	</p>
	</div>
	
	<p><b>Some interesting things you can do</b>:
		<ul>
		<li><strong>Find the point on Earth's surface closest to the Moon:</strong><br>
			Set Point 0 to <em>Earth</em>, Point 1 to <em>Moon</em>, and Distance to <strong>60000</strong> (Earth's radius).
		
		<li><strong>Find the Moon's North Pole (great for a base with 24-hour sunlight and ice):</strong><br>
			Set Point 0 to <em>Moon</em>, Point 1 to manually enter <strong>x: 16384, y: 126884, z: -113616</strong> (Moon's y-value minus 9500), and Distance to <strong>0</strong>.<br>
			<em>Note: North is negative Y direction, so we subtract the Moon's radius from its center Y coordinate.</em>
		
		<li><strong>Find the point on Earth's surface closest to the Moon's North Pole:</strong><br>
			Set Point 0 to <em>Earth</em>, Point 1 to manually enter <strong>x: 16384, y: 126884, z: -113616</strong>, and Distance to <strong>60000</strong>.<br>
			<em>Note: This location is in a mountain range, so the closest accessible point is about 4km above the calculated position.</em>
		
		<li><strong>Find a safe jump point above Europa (between Europa and Mars):</strong><br>
			Set Point 0 to <em>Europa</em>, Point 1 to <em>Mars</em>, and Distance to <strong>15000</strong> (safe distance for moon clearance).
		</ul>
	</p>
	
	<p><b>References</b>:
		<ul>
		<li><a href="https://www.reddit.com/r/spaceengineers/comments/9175ds/what_are_the_gps_coordinates_for_the_planets/"
			>What are the GPS coordinates for the planets?</a>
		<li><a href="https://www.reddit.com/r/spaceengineers/comments/7l5pbm/does_anyone_have_planet_radius_measurements/"
			>Does anyone have Planet Radius measurements?</a>
		<li><a href="https://www.math.usm.edu/lambers/mat169/fall09/lecture17.pdf"
			>Three-Dimensional Coordinate Systems: The Distance Formula</a>
		<li><a href="https://math.stackexchange.com/a/1630886/102799"
			>Finding a point along a line a certain distance away from another point!</a>
		<li><a href="https://thebestmotherfucking.website/"
			>CSS thanks to this site</a>
		</ul>
	</p>
</body>
</html>